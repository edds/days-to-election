<!DOCTYPE html>
<html>
<head>
   <title>Days to election&hellip;</title>
   <meta charset='utf-8'>
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link href="https://assets.digital.cabinet-office.gov.uk/static/fonts-83e596ae63d072e22b7f34d2b5482bde.css" media="screen" rel="stylesheet" type="text/css">
   <link href="assets/stylesheets/days-to-election.css" media="screen" rel="stylesheet" type="text/css">
   <script type="text/javascript" src="assets/javascripts/moment.min.js"></script>
   <script type="text/javascript" src="assets/javascripts/moment-range.min.js"></script>
</head>

<body id="election">

<h1 id="time_to_go">It's voting day!</h1>
<p id="until"></p>

<script type="text/javascript">

var time_to_election = function() {
  var today         = new Date();
  var election_date = new Date("May 7, 2015");
  var time_to_go    = moment.range(today, election_date);

  var weeks   = time_to_go.diff('weeks');
  var days    = time_to_go.diff('days') - (weeks * 7);
  var hours   = time_to_go.diff('hours');
  var minutes = time_to_go.diff('minutes');
  var seconds = time_to_go.diff('seconds');

  var dayString = "";
  if(days > 1){
    dayString = days + " days";
  } else if(days === 1){
    dayString = days + " day";
  }

  var weekString = "";
  if(weeks > 1){
    weekString = weeks + " weeks";
  } else if(weeks === 1){
    weekString = weeks + " week";
  }

  document.getElementById('time_to_go').innerHTML = weekString + " " + dayString;
  document.getElementById('until').innerHTML = "until the election";
}

var refresh_rate = 600; // every n seconds
refresh_rate_ms = 1000 * refresh_rate;
//setInterval(time_to_election, refresh_rate_ms);
//time_to_election();

</script>

</body>
</html>
